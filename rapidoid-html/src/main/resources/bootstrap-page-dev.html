<!DOCTYPE html>
<html lang="en">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>{{title}}</title>

<script src="/jquery-2.1.1.min.js"></script>
<script src="/bootstrap/js/bootstrap.min.js"></script>

<link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">

<script>
var theme;
try {
  var m = /\bTHEME=(\w+?)\b/g.exec(document.cookie);
  theme = m[1];
} catch (e) { }
if (theme && theme != 'default') {
document.write('<link href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.0/' + theme + '/bootstrap.min.css" rel="stylesheet">');
}
</script>

<link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet">

<script>
function _emit(event) {

	var x = document.querySelectorAll("input,textarea");

	var inputs = {};

	for (var i = 0; i < x.length; i++) {
		var t = $(x[i]);
		var _h = t.attr('_h');

		if (_h) {
			var val;
	
			if (t.prop('type') == 'checkbox' || t.prop('type') == 'radio') {
				val = t.prop('checked');
			} else {
				val = t.val();
			}
	
			inputs[_h] = val;
		}
	}
	
	x = document.querySelectorAll("option");

	for (var i = 0; i < x.length; i++) {
		var t = $(x[i]);
		var _h = t.attr('_h');

		if (_h) {
			inputs[_h] = t.prop('selected');
		}
	}

	$.post('/_emit', {
		event : event,
		inputs : JSON.stringify(inputs)
	}).done(function(data) {
		for ( var sel in data) {
			$(sel).html(data[sel]);
		}
	}).fail(function(data) {
		alert("Error!");
		console.log(data);
	});
}
</script>

{{head}}
</head>

{{body}}

</html>
